This is a "helper" for Prodigium's contact management system.  Since Prodigium is a movie production company, they have a LOT of contacts (10,000+).  They keep their contacts in Full Contact, but for various reasons they have a "tag" scheme which categories them.  E.g., pp_actor_old, which means someone that's worked for Prodigium, and is an older actor.  Some contacts have many such tags.  The tags are a pain, and in some cases impossible, to search.

The app loads an export from Full Contact, which is a CSV file, and parse it using papaparse. After parsing it is entered into a Mongo database.  The app is designed to allow frequent updating of the database, using Mongo's upsert feature.  At the same time it is loading the database the app updates a record (stored in a file) of the tags it sees, and the relationship between them (e.g., old is a subcategory of actor);  So for the database search the select elements are built "on the fly," by referring to the categories data.  This is necessary because a) there are a lot of tags, so building the relationships manually would be very time-consuming, and b) because of the high probability that new tags will be defined, which would be a maintenance nightmare if the tag relationships were maintained manually.  Since the database loading can take a while (~45 seconds for 10,000 contacts on my slow server), the app uses a socket commununication to let the client know that loading is complete, so the client can then ask to see the "results" page.

The database can be searched with various forms of complex searches.  For example: former Prodigium employee who is an actor, either in his 40s or 50s, whose gender is male, and whose ethnicity is Latin or Asian.

When the search is complete the app shows a list of contacts who meet the spec.  Clicking on a contact reveals more information.  This is a capability demonstration, because the customer hasn't yet defined what "more information" should be.  One thing the app does for this is to go to the Full Contacts API and retrieve an image URL (which is not in the export file), so that it can show a picture of the contact.  Unfortunately, Full Contact has a limit on how many times you can do this with the nearly-free subscription Prodigium has.  So the image URL is loaded into another table in Mongo (another table so you can clear the database to "start over" without losing any images).

I have discovered recently that Full Contact backups are readily available, and contain more info than the export file.  They are, of course, in a completely different format, but I shall probably convert the app to use them.  The app, which I started writing some while ago, uses handlebars. With the changing select elements for the search, it is an obvious candidate for React.  So that's another near-term upgrade.



